<section data-section-id="{{section.id}}" data-type="blog-posts">
  {% if section.settings.title != blank %}
  <h2 class="general-title">{{section.settings.title}}</h2>
  {% endif %}

  <div class="grid">
    {% for post in blog_posts limit: {{section.settings.grid}} %}
    {% if forloop.index != 1 %}-->{% endif %}<div class="grid__item one-whole lap--one-half desk--one-third">
      <div class="text-column">

        {% if post.name %}
        <h2 class="general-title">{{post.name}}</h2>
        {% endif %}

        {% if post.author %}
        <h3 class="post-author">{{post.author}}</h3>
        {% endif %}

        {% if post.content %}
        <div class="text-column-text">{{post.content | truncate: 150, '...'}}</div>
        {% endif %}

        <a role="button" class="button secondary" href="{{post.url}}">Read more</a>
      </div>
    </div>{% if forloop.index != 0 and forloop.last != true %}<!--{% endif %}
    {% endfor %}
  </div>

  {% if section.settings.show_button == true %}
  <div class="row">
    <div class="column">
      <div class="buttons">
        <a href="/blog" role="button" class="button primary">View all</a>
      </div>
    </div>
  </div>
  {% endif %}

</section>
